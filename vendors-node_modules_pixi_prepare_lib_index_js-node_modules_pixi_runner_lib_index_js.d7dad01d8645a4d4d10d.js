"use strict";
(self["webpackChunkwedding_website"] = self["webpackChunkwedding_website"] || []).push([["vendors-node_modules_pixi_prepare_lib_index_js-node_modules_pixi_runner_lib_index_js"],{

/***/ "./node_modules/@pixi/prepare/lib/BasePrepare.js":
/*!*******************************************************!*\
  !*** ./node_modules/@pixi/prepare/lib/BasePrepare.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({ value: true }));

var core = __webpack_require__(/*! @pixi/core */ "./node_modules/@pixi/core/lib/index.js");
var display = __webpack_require__(/*! @pixi/display */ "./node_modules/@pixi/display/lib/index.js");
var text = __webpack_require__(/*! @pixi/text */ "./node_modules/@pixi/text/lib/index.js");
var CountLimiter = __webpack_require__(/*! ./CountLimiter.js */ "./node_modules/@pixi/prepare/lib/CountLimiter.js");

function findMultipleBaseTextures(item, queue) {
  let result = false;
  if (item?._textures?.length) {
    for (let i = 0; i < item._textures.length; i++) {
      if (item._textures[i] instanceof core.Texture) {
        const baseTexture = item._textures[i].baseTexture;
        if (!queue.includes(baseTexture)) {
          queue.push(baseTexture);
          result = true;
        }
      }
    }
  }
  return result;
}
function findBaseTexture(item, queue) {
  if (item.baseTexture instanceof core.BaseTexture) {
    const texture = item.baseTexture;
    if (!queue.includes(texture)) {
      queue.push(texture);
    }
    return true;
  }
  return false;
}
function findTexture(item, queue) {
  if (item._texture && item._texture instanceof core.Texture) {
    const texture = item._texture.baseTexture;
    if (!queue.includes(texture)) {
      queue.push(texture);
    }
    return true;
  }
  return false;
}
function drawText(_helper, item) {
  if (item instanceof text.Text) {
    item.updateText(true);
    return true;
  }
  return false;
}
function calculateTextStyle(_helper, item) {
  if (item instanceof text.TextStyle) {
    const font = item.toFontString();
    text.TextMetrics.measureFont(font);
    return true;
  }
  return false;
}
function findText(item, queue) {
  if (item instanceof text.Text) {
    if (!queue.includes(item.style)) {
      queue.push(item.style);
    }
    if (!queue.includes(item)) {
      queue.push(item);
    }
    const texture = item._texture.baseTexture;
    if (!queue.includes(texture)) {
      queue.push(texture);
    }
    return true;
  }
  return false;
}
function findTextStyle(item, queue) {
  if (item instanceof text.TextStyle) {
    if (!queue.includes(item)) {
      queue.push(item);
    }
    return true;
  }
  return false;
}
const _BasePrepare = class {
  constructor(renderer) {
    this.limiter = new CountLimiter.CountLimiter(_BasePrepare.uploadsPerFrame);
    this.renderer = renderer;
    this.uploadHookHelper = null;
    this.queue = [];
    this.addHooks = [];
    this.uploadHooks = [];
    this.completes = [];
    this.ticking = false;
    this.delayedTick = () => {
      if (!this.queue) {
        return;
      }
      this.prepareItems();
    };
    this.registerFindHook(findText);
    this.registerFindHook(findTextStyle);
    this.registerFindHook(findMultipleBaseTextures);
    this.registerFindHook(findBaseTexture);
    this.registerFindHook(findTexture);
    this.registerUploadHook(drawText);
    this.registerUploadHook(calculateTextStyle);
  }
  upload(item) {
    return new Promise((resolve) => {
      if (item) {
        this.add(item);
      }
      if (this.queue.length) {
        this.completes.push(resolve);
        if (!this.ticking) {
          this.ticking = true;
          core.Ticker.system.addOnce(this.tick, this, core.UPDATE_PRIORITY.UTILITY);
        }
      } else {
        resolve();
      }
    });
  }
  tick() {
    setTimeout(this.delayedTick, 0);
  }
  prepareItems() {
    this.limiter.beginFrame();
    while (this.queue.length && this.limiter.allowedToUpload()) {
      const item = this.queue[0];
      let uploaded = false;
      if (item && !item._destroyed) {
        for (let i = 0, len = this.uploadHooks.length; i < len; i++) {
          if (this.uploadHooks[i](this.uploadHookHelper, item)) {
            this.queue.shift();
            uploaded = true;
            break;
          }
        }
      }
      if (!uploaded) {
        this.queue.shift();
      }
    }
    if (!this.queue.length) {
      this.ticking = false;
      const completes = this.completes.slice(0);
      this.completes.length = 0;
      for (let i = 0, len = completes.length; i < len; i++) {
        completes[i]();
      }
    } else {
      core.Ticker.system.addOnce(this.tick, this, core.UPDATE_PRIORITY.UTILITY);
    }
  }
  registerFindHook(addHook) {
    if (addHook) {
      this.addHooks.push(addHook);
    }
    return this;
  }
  registerUploadHook(uploadHook) {
    if (uploadHook) {
      this.uploadHooks.push(uploadHook);
    }
    return this;
  }
  add(item) {
    for (let i = 0, len = this.addHooks.length; i < len; i++) {
      if (this.addHooks[i](item, this.queue)) {
        break;
      }
    }
    if (item instanceof display.Container) {
      for (let i = item.children.length - 1; i >= 0; i--) {
        this.add(item.children[i]);
      }
    }
    return this;
  }
  destroy() {
    if (this.ticking) {
      core.Ticker.system.remove(this.tick, this);
    }
    this.ticking = false;
    this.addHooks = null;
    this.uploadHooks = null;
    this.renderer = null;
    this.completes = null;
    this.queue = null;
    this.limiter = null;
    this.uploadHookHelper = null;
  }
};
let BasePrepare = _BasePrepare;
BasePrepare.uploadsPerFrame = 4;

exports.BasePrepare = BasePrepare;
//# sourceMappingURL=BasePrepare.js.map


/***/ }),

/***/ "./node_modules/@pixi/prepare/lib/CountLimiter.js":
/*!********************************************************!*\
  !*** ./node_modules/@pixi/prepare/lib/CountLimiter.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({ value: true }));

class CountLimiter {
  constructor(maxItemsPerFrame) {
    this.maxItemsPerFrame = maxItemsPerFrame;
    this.itemsLeft = 0;
  }
  beginFrame() {
    this.itemsLeft = this.maxItemsPerFrame;
  }
  allowedToUpload() {
    return this.itemsLeft-- > 0;
  }
}

exports.CountLimiter = CountLimiter;
//# sourceMappingURL=CountLimiter.js.map


/***/ }),

/***/ "./node_modules/@pixi/prepare/lib/Prepare.js":
/*!***************************************************!*\
  !*** ./node_modules/@pixi/prepare/lib/Prepare.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({ value: true }));

var core = __webpack_require__(/*! @pixi/core */ "./node_modules/@pixi/core/lib/index.js");
var graphics = __webpack_require__(/*! @pixi/graphics */ "./node_modules/@pixi/graphics/lib/index.js");
var BasePrepare = __webpack_require__(/*! ./BasePrepare.js */ "./node_modules/@pixi/prepare/lib/BasePrepare.js");

function uploadBaseTextures(renderer, item) {
  if (item instanceof core.BaseTexture) {
    if (!item._glTextures[renderer.CONTEXT_UID]) {
      renderer.texture.bind(item);
    }
    return true;
  }
  return false;
}
function uploadGraphics(renderer, item) {
  if (!(item instanceof graphics.Graphics)) {
    return false;
  }
  const { geometry } = item;
  item.finishPoly();
  geometry.updateBatches();
  const { batches } = geometry;
  for (let i = 0; i < batches.length; i++) {
    const { texture } = batches[i].style;
    if (texture) {
      uploadBaseTextures(renderer, texture.baseTexture);
    }
  }
  if (!geometry.batchable) {
    renderer.geometry.bind(geometry, item._resolveDirectShader(renderer));
  }
  return true;
}
function findGraphics(item, queue) {
  if (item instanceof graphics.Graphics) {
    queue.push(item);
    return true;
  }
  return false;
}
class Prepare extends BasePrepare.BasePrepare {
  constructor(renderer) {
    super(renderer);
    this.uploadHookHelper = this.renderer;
    this.registerFindHook(findGraphics);
    this.registerUploadHook(uploadBaseTextures);
    this.registerUploadHook(uploadGraphics);
  }
}
Prepare.extension = {
  name: "prepare",
  type: core.ExtensionType.RendererSystem
};
core.extensions.add(Prepare);

exports.Prepare = Prepare;
//# sourceMappingURL=Prepare.js.map


/***/ }),

/***/ "./node_modules/@pixi/prepare/lib/TimeLimiter.js":
/*!*******************************************************!*\
  !*** ./node_modules/@pixi/prepare/lib/TimeLimiter.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({ value: true }));

class TimeLimiter {
  constructor(maxMilliseconds) {
    this.maxMilliseconds = maxMilliseconds;
    this.frameStart = 0;
  }
  beginFrame() {
    this.frameStart = Date.now();
  }
  allowedToUpload() {
    return Date.now() - this.frameStart < this.maxMilliseconds;
  }
}

exports.TimeLimiter = TimeLimiter;
//# sourceMappingURL=TimeLimiter.js.map


/***/ }),

/***/ "./node_modules/@pixi/prepare/lib/index.js":
/*!*************************************************!*\
  !*** ./node_modules/@pixi/prepare/lib/index.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({ value: true }));

__webpack_require__(/*! ./settings.js */ "./node_modules/@pixi/prepare/lib/settings.js");
var BasePrepare = __webpack_require__(/*! ./BasePrepare.js */ "./node_modules/@pixi/prepare/lib/BasePrepare.js");
var CountLimiter = __webpack_require__(/*! ./CountLimiter.js */ "./node_modules/@pixi/prepare/lib/CountLimiter.js");
var Prepare = __webpack_require__(/*! ./Prepare.js */ "./node_modules/@pixi/prepare/lib/Prepare.js");
var TimeLimiter = __webpack_require__(/*! ./TimeLimiter.js */ "./node_modules/@pixi/prepare/lib/TimeLimiter.js");



exports.BasePrepare = BasePrepare.BasePrepare;
exports.CountLimiter = CountLimiter.CountLimiter;
exports.Prepare = Prepare.Prepare;
exports.TimeLimiter = TimeLimiter.TimeLimiter;
//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@pixi/prepare/lib/settings.js":
/*!****************************************************!*\
  !*** ./node_modules/@pixi/prepare/lib/settings.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({ value: true }));

var core = __webpack_require__(/*! @pixi/core */ "./node_modules/@pixi/core/lib/index.js");
var BasePrepare = __webpack_require__(/*! ./BasePrepare.js */ "./node_modules/@pixi/prepare/lib/BasePrepare.js");

Object.defineProperties(core.settings, {
  UPLOADS_PER_FRAME: {
    get() {
      return BasePrepare.BasePrepare.uploadsPerFrame;
    },
    set(value) {
      core.utils.deprecation("7.1.0", "settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame");
      BasePrepare.BasePrepare.uploadsPerFrame = value;
    }
  }
});

Object.defineProperty(exports, "settings", ({
    enumerable: true,
    get: function () { return core.settings; }
}));
//# sourceMappingURL=settings.js.map


/***/ }),

/***/ "./node_modules/@pixi/runner/lib/Runner.js":
/*!*************************************************!*\
  !*** ./node_modules/@pixi/runner/lib/Runner.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({ value: true }));

class Runner {
  constructor(name) {
    this.items = [];
    this._name = name;
    this._aliasCount = 0;
  }
  emit(a0, a1, a2, a3, a4, a5, a6, a7) {
    if (arguments.length > 8) {
      throw new Error("max arguments reached");
    }
    const { name, items } = this;
    this._aliasCount++;
    for (let i = 0, len = items.length; i < len; i++) {
      items[i][name](a0, a1, a2, a3, a4, a5, a6, a7);
    }
    if (items === this.items) {
      this._aliasCount--;
    }
    return this;
  }
  ensureNonAliasedItems() {
    if (this._aliasCount > 0 && this.items.length > 1) {
      this._aliasCount = 0;
      this.items = this.items.slice(0);
    }
  }
  add(item) {
    if (item[this._name]) {
      this.ensureNonAliasedItems();
      this.remove(item);
      this.items.push(item);
    }
    return this;
  }
  remove(item) {
    const index = this.items.indexOf(item);
    if (index !== -1) {
      this.ensureNonAliasedItems();
      this.items.splice(index, 1);
    }
    return this;
  }
  contains(item) {
    return this.items.includes(item);
  }
  removeAll() {
    this.ensureNonAliasedItems();
    this.items.length = 0;
    return this;
  }
  destroy() {
    this.removeAll();
    this.items = null;
    this._name = null;
  }
  get empty() {
    return this.items.length === 0;
  }
  get name() {
    return this._name;
  }
}
Object.defineProperties(Runner.prototype, {
  dispatch: { value: Runner.prototype.emit },
  run: { value: Runner.prototype.emit }
});

exports.Runner = Runner;
//# sourceMappingURL=Runner.js.map


/***/ }),

/***/ "./node_modules/@pixi/runner/lib/index.js":
/*!************************************************!*\
  !*** ./node_modules/@pixi/runner/lib/index.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({ value: true }));

var Runner = __webpack_require__(/*! ./Runner.js */ "./node_modules/@pixi/runner/lib/Runner.js");



exports.Runner = Runner.Runner;
//# sourceMappingURL=index.js.map


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfcGl4aV9wcmVwYXJlX2xpYl9pbmRleF9qcy1ub2RlX21vZHVsZXNfcGl4aV9ydW5uZXJfbGliX2luZGV4X2pzLmQ3ZGFkMDFkODY0NWE0ZDRkMTBkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFhOztBQUViLDhDQUE2QyxFQUFFLGFBQWEsRUFBQzs7QUFFN0QsV0FBVyxtQkFBTyxDQUFDLDBEQUFZO0FBQy9CLGNBQWMsbUJBQU8sQ0FBQyxnRUFBZTtBQUNyQyxXQUFXLG1CQUFPLENBQUMsMERBQVk7QUFDL0IsbUJBQW1CLG1CQUFPLENBQUMsMkVBQW1COztBQUU5QztBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkJBQTJCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw4QkFBOEI7QUFDNUMsU0FBUztBQUNULENBQUM7O0FBRUQsY0FBYztBQUNkOzs7Ozs7Ozs7OztBQ3hFYTs7QUFFYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7O0FBRTdELGFBQWEsbUJBQU8sQ0FBQyw4REFBYTs7OztBQUlsQyxjQUFjO0FBQ2QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWRkaW5nLXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQHBpeGkvcHJlcGFyZS9saWIvQmFzZVByZXBhcmUuanMiLCJ3ZWJwYWNrOi8vd2VkZGluZy13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BwaXhpL3ByZXBhcmUvbGliL0NvdW50TGltaXRlci5qcyIsIndlYnBhY2s6Ly93ZWRkaW5nLXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQHBpeGkvcHJlcGFyZS9saWIvUHJlcGFyZS5qcyIsIndlYnBhY2s6Ly93ZWRkaW5nLXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQHBpeGkvcHJlcGFyZS9saWIvVGltZUxpbWl0ZXIuanMiLCJ3ZWJwYWNrOi8vd2VkZGluZy13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BwaXhpL3ByZXBhcmUvbGliL2luZGV4LmpzIiwid2VicGFjazovL3dlZGRpbmctd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AcGl4aS9wcmVwYXJlL2xpYi9zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly93ZWRkaW5nLXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQHBpeGkvcnVubmVyL2xpYi9SdW5uZXIuanMiLCJ3ZWJwYWNrOi8vd2VkZGluZy13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BwaXhpL3J1bm5lci9saWIvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgY29yZSA9IHJlcXVpcmUoJ0BwaXhpL2NvcmUnKTtcbnZhciBkaXNwbGF5ID0gcmVxdWlyZSgnQHBpeGkvZGlzcGxheScpO1xudmFyIHRleHQgPSByZXF1aXJlKCdAcGl4aS90ZXh0Jyk7XG52YXIgQ291bnRMaW1pdGVyID0gcmVxdWlyZSgnLi9Db3VudExpbWl0ZXIuanMnKTtcblxuZnVuY3Rpb24gZmluZE11bHRpcGxlQmFzZVRleHR1cmVzKGl0ZW0sIHF1ZXVlKSB7XG4gIGxldCByZXN1bHQgPSBmYWxzZTtcbiAgaWYgKGl0ZW0/Ll90ZXh0dXJlcz8ubGVuZ3RoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLl90ZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGl0ZW0uX3RleHR1cmVzW2ldIGluc3RhbmNlb2YgY29yZS5UZXh0dXJlKSB7XG4gICAgICAgIGNvbnN0IGJhc2VUZXh0dXJlID0gaXRlbS5fdGV4dHVyZXNbaV0uYmFzZVRleHR1cmU7XG4gICAgICAgIGlmICghcXVldWUuaW5jbHVkZXMoYmFzZVRleHR1cmUpKSB7XG4gICAgICAgICAgcXVldWUucHVzaChiYXNlVGV4dHVyZSk7XG4gICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZmluZEJhc2VUZXh0dXJlKGl0ZW0sIHF1ZXVlKSB7XG4gIGlmIChpdGVtLmJhc2VUZXh0dXJlIGluc3RhbmNlb2YgY29yZS5CYXNlVGV4dHVyZSkge1xuICAgIGNvbnN0IHRleHR1cmUgPSBpdGVtLmJhc2VUZXh0dXJlO1xuICAgIGlmICghcXVldWUuaW5jbHVkZXModGV4dHVyZSkpIHtcbiAgICAgIHF1ZXVlLnB1c2godGV4dHVyZSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGZpbmRUZXh0dXJlKGl0ZW0sIHF1ZXVlKSB7XG4gIGlmIChpdGVtLl90ZXh0dXJlICYmIGl0ZW0uX3RleHR1cmUgaW5zdGFuY2VvZiBjb3JlLlRleHR1cmUpIHtcbiAgICBjb25zdCB0ZXh0dXJlID0gaXRlbS5fdGV4dHVyZS5iYXNlVGV4dHVyZTtcbiAgICBpZiAoIXF1ZXVlLmluY2x1ZGVzKHRleHR1cmUpKSB7XG4gICAgICBxdWV1ZS5wdXNoKHRleHR1cmUpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBkcmF3VGV4dChfaGVscGVyLCBpdGVtKSB7XG4gIGlmIChpdGVtIGluc3RhbmNlb2YgdGV4dC5UZXh0KSB7XG4gICAgaXRlbS51cGRhdGVUZXh0KHRydWUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGNhbGN1bGF0ZVRleHRTdHlsZShfaGVscGVyLCBpdGVtKSB7XG4gIGlmIChpdGVtIGluc3RhbmNlb2YgdGV4dC5UZXh0U3R5bGUpIHtcbiAgICBjb25zdCBmb250ID0gaXRlbS50b0ZvbnRTdHJpbmcoKTtcbiAgICB0ZXh0LlRleHRNZXRyaWNzLm1lYXN1cmVGb250KGZvbnQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGZpbmRUZXh0KGl0ZW0sIHF1ZXVlKSB7XG4gIGlmIChpdGVtIGluc3RhbmNlb2YgdGV4dC5UZXh0KSB7XG4gICAgaWYgKCFxdWV1ZS5pbmNsdWRlcyhpdGVtLnN0eWxlKSkge1xuICAgICAgcXVldWUucHVzaChpdGVtLnN0eWxlKTtcbiAgICB9XG4gICAgaWYgKCFxdWV1ZS5pbmNsdWRlcyhpdGVtKSkge1xuICAgICAgcXVldWUucHVzaChpdGVtKTtcbiAgICB9XG4gICAgY29uc3QgdGV4dHVyZSA9IGl0ZW0uX3RleHR1cmUuYmFzZVRleHR1cmU7XG4gICAgaWYgKCFxdWV1ZS5pbmNsdWRlcyh0ZXh0dXJlKSkge1xuICAgICAgcXVldWUucHVzaCh0ZXh0dXJlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZmluZFRleHRTdHlsZShpdGVtLCBxdWV1ZSkge1xuICBpZiAoaXRlbSBpbnN0YW5jZW9mIHRleHQuVGV4dFN0eWxlKSB7XG4gICAgaWYgKCFxdWV1ZS5pbmNsdWRlcyhpdGVtKSkge1xuICAgICAgcXVldWUucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuY29uc3QgX0Jhc2VQcmVwYXJlID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlcikge1xuICAgIHRoaXMubGltaXRlciA9IG5ldyBDb3VudExpbWl0ZXIuQ291bnRMaW1pdGVyKF9CYXNlUHJlcGFyZS51cGxvYWRzUGVyRnJhbWUpO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLnVwbG9hZEhvb2tIZWxwZXIgPSBudWxsO1xuICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICB0aGlzLmFkZEhvb2tzID0gW107XG4gICAgdGhpcy51cGxvYWRIb29rcyA9IFtdO1xuICAgIHRoaXMuY29tcGxldGVzID0gW107XG4gICAgdGhpcy50aWNraW5nID0gZmFsc2U7XG4gICAgdGhpcy5kZWxheWVkVGljayA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5xdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnByZXBhcmVJdGVtcygpO1xuICAgIH07XG4gICAgdGhpcy5yZWdpc3RlckZpbmRIb29rKGZpbmRUZXh0KTtcbiAgICB0aGlzLnJlZ2lzdGVyRmluZEhvb2soZmluZFRleHRTdHlsZSk7XG4gICAgdGhpcy5yZWdpc3RlckZpbmRIb29rKGZpbmRNdWx0aXBsZUJhc2VUZXh0dXJlcyk7XG4gICAgdGhpcy5yZWdpc3RlckZpbmRIb29rKGZpbmRCYXNlVGV4dHVyZSk7XG4gICAgdGhpcy5yZWdpc3RlckZpbmRIb29rKGZpbmRUZXh0dXJlKTtcbiAgICB0aGlzLnJlZ2lzdGVyVXBsb2FkSG9vayhkcmF3VGV4dCk7XG4gICAgdGhpcy5yZWdpc3RlclVwbG9hZEhvb2soY2FsY3VsYXRlVGV4dFN0eWxlKTtcbiAgfVxuICB1cGxvYWQoaXRlbSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5hZGQoaXRlbSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZXMucHVzaChyZXNvbHZlKTtcbiAgICAgICAgaWYgKCF0aGlzLnRpY2tpbmcpIHtcbiAgICAgICAgICB0aGlzLnRpY2tpbmcgPSB0cnVlO1xuICAgICAgICAgIGNvcmUuVGlja2VyLnN5c3RlbS5hZGRPbmNlKHRoaXMudGljaywgdGhpcywgY29yZS5VUERBVEVfUFJJT1JJVFkuVVRJTElUWSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICB0aWNrKCkge1xuICAgIHNldFRpbWVvdXQodGhpcy5kZWxheWVkVGljaywgMCk7XG4gIH1cbiAgcHJlcGFyZUl0ZW1zKCkge1xuICAgIHRoaXMubGltaXRlci5iZWdpbkZyYW1lKCk7XG4gICAgd2hpbGUgKHRoaXMucXVldWUubGVuZ3RoICYmIHRoaXMubGltaXRlci5hbGxvd2VkVG9VcGxvYWQoKSkge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMucXVldWVbMF07XG4gICAgICBsZXQgdXBsb2FkZWQgPSBmYWxzZTtcbiAgICAgIGlmIChpdGVtICYmICFpdGVtLl9kZXN0cm95ZWQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRoaXMudXBsb2FkSG9va3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBpZiAodGhpcy51cGxvYWRIb29rc1tpXSh0aGlzLnVwbG9hZEhvb2tIZWxwZXIsIGl0ZW0pKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICB1cGxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghdXBsb2FkZWQpIHtcbiAgICAgICAgdGhpcy5xdWV1ZS5zaGlmdCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMucXVldWUubGVuZ3RoKSB7XG4gICAgICB0aGlzLnRpY2tpbmcgPSBmYWxzZTtcbiAgICAgIGNvbnN0IGNvbXBsZXRlcyA9IHRoaXMuY29tcGxldGVzLnNsaWNlKDApO1xuICAgICAgdGhpcy5jb21wbGV0ZXMubGVuZ3RoID0gMDtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBjb21wbGV0ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY29tcGxldGVzW2ldKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvcmUuVGlja2VyLnN5c3RlbS5hZGRPbmNlKHRoaXMudGljaywgdGhpcywgY29yZS5VUERBVEVfUFJJT1JJVFkuVVRJTElUWSk7XG4gICAgfVxuICB9XG4gIHJlZ2lzdGVyRmluZEhvb2soYWRkSG9vaykge1xuICAgIGlmIChhZGRIb29rKSB7XG4gICAgICB0aGlzLmFkZEhvb2tzLnB1c2goYWRkSG9vayk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJlZ2lzdGVyVXBsb2FkSG9vayh1cGxvYWRIb29rKSB7XG4gICAgaWYgKHVwbG9hZEhvb2spIHtcbiAgICAgIHRoaXMudXBsb2FkSG9va3MucHVzaCh1cGxvYWRIb29rKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYWRkKGl0ZW0pIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5hZGRIb29rcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKHRoaXMuYWRkSG9va3NbaV0oaXRlbSwgdGhpcy5xdWV1ZSkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgZGlzcGxheS5Db250YWluZXIpIHtcbiAgICAgIGZvciAobGV0IGkgPSBpdGVtLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHRoaXMuYWRkKGl0ZW0uY2hpbGRyZW5baV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBkZXN0cm95KCkge1xuICAgIGlmICh0aGlzLnRpY2tpbmcpIHtcbiAgICAgIGNvcmUuVGlja2VyLnN5c3RlbS5yZW1vdmUodGhpcy50aWNrLCB0aGlzKTtcbiAgICB9XG4gICAgdGhpcy50aWNraW5nID0gZmFsc2U7XG4gICAgdGhpcy5hZGRIb29rcyA9IG51bGw7XG4gICAgdGhpcy51cGxvYWRIb29rcyA9IG51bGw7XG4gICAgdGhpcy5yZW5kZXJlciA9IG51bGw7XG4gICAgdGhpcy5jb21wbGV0ZXMgPSBudWxsO1xuICAgIHRoaXMucXVldWUgPSBudWxsO1xuICAgIHRoaXMubGltaXRlciA9IG51bGw7XG4gICAgdGhpcy51cGxvYWRIb29rSGVscGVyID0gbnVsbDtcbiAgfVxufTtcbmxldCBCYXNlUHJlcGFyZSA9IF9CYXNlUHJlcGFyZTtcbkJhc2VQcmVwYXJlLnVwbG9hZHNQZXJGcmFtZSA9IDQ7XG5cbmV4cG9ydHMuQmFzZVByZXBhcmUgPSBCYXNlUHJlcGFyZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJhc2VQcmVwYXJlLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG5jbGFzcyBDb3VudExpbWl0ZXIge1xuICBjb25zdHJ1Y3RvcihtYXhJdGVtc1BlckZyYW1lKSB7XG4gICAgdGhpcy5tYXhJdGVtc1BlckZyYW1lID0gbWF4SXRlbXNQZXJGcmFtZTtcbiAgICB0aGlzLml0ZW1zTGVmdCA9IDA7XG4gIH1cbiAgYmVnaW5GcmFtZSgpIHtcbiAgICB0aGlzLml0ZW1zTGVmdCA9IHRoaXMubWF4SXRlbXNQZXJGcmFtZTtcbiAgfVxuICBhbGxvd2VkVG9VcGxvYWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXNMZWZ0LS0gPiAwO1xuICB9XG59XG5cbmV4cG9ydHMuQ291bnRMaW1pdGVyID0gQ291bnRMaW1pdGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q291bnRMaW1pdGVyLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgY29yZSA9IHJlcXVpcmUoJ0BwaXhpL2NvcmUnKTtcbnZhciBncmFwaGljcyA9IHJlcXVpcmUoJ0BwaXhpL2dyYXBoaWNzJyk7XG52YXIgQmFzZVByZXBhcmUgPSByZXF1aXJlKCcuL0Jhc2VQcmVwYXJlLmpzJyk7XG5cbmZ1bmN0aW9uIHVwbG9hZEJhc2VUZXh0dXJlcyhyZW5kZXJlciwgaXRlbSkge1xuICBpZiAoaXRlbSBpbnN0YW5jZW9mIGNvcmUuQmFzZVRleHR1cmUpIHtcbiAgICBpZiAoIWl0ZW0uX2dsVGV4dHVyZXNbcmVuZGVyZXIuQ09OVEVYVF9VSURdKSB7XG4gICAgICByZW5kZXJlci50ZXh0dXJlLmJpbmQoaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHVwbG9hZEdyYXBoaWNzKHJlbmRlcmVyLCBpdGVtKSB7XG4gIGlmICghKGl0ZW0gaW5zdGFuY2VvZiBncmFwaGljcy5HcmFwaGljcykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgeyBnZW9tZXRyeSB9ID0gaXRlbTtcbiAgaXRlbS5maW5pc2hQb2x5KCk7XG4gIGdlb21ldHJ5LnVwZGF0ZUJhdGNoZXMoKTtcbiAgY29uc3QgeyBiYXRjaGVzIH0gPSBnZW9tZXRyeTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgeyB0ZXh0dXJlIH0gPSBiYXRjaGVzW2ldLnN0eWxlO1xuICAgIGlmICh0ZXh0dXJlKSB7XG4gICAgICB1cGxvYWRCYXNlVGV4dHVyZXMocmVuZGVyZXIsIHRleHR1cmUuYmFzZVRleHR1cmUpO1xuICAgIH1cbiAgfVxuICBpZiAoIWdlb21ldHJ5LmJhdGNoYWJsZSkge1xuICAgIHJlbmRlcmVyLmdlb21ldHJ5LmJpbmQoZ2VvbWV0cnksIGl0ZW0uX3Jlc29sdmVEaXJlY3RTaGFkZXIocmVuZGVyZXIpKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGZpbmRHcmFwaGljcyhpdGVtLCBxdWV1ZSkge1xuICBpZiAoaXRlbSBpbnN0YW5jZW9mIGdyYXBoaWNzLkdyYXBoaWNzKSB7XG4gICAgcXVldWUucHVzaChpdGVtKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5jbGFzcyBQcmVwYXJlIGV4dGVuZHMgQmFzZVByZXBhcmUuQmFzZVByZXBhcmUge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlcikge1xuICAgIHN1cGVyKHJlbmRlcmVyKTtcbiAgICB0aGlzLnVwbG9hZEhvb2tIZWxwZXIgPSB0aGlzLnJlbmRlcmVyO1xuICAgIHRoaXMucmVnaXN0ZXJGaW5kSG9vayhmaW5kR3JhcGhpY3MpO1xuICAgIHRoaXMucmVnaXN0ZXJVcGxvYWRIb29rKHVwbG9hZEJhc2VUZXh0dXJlcyk7XG4gICAgdGhpcy5yZWdpc3RlclVwbG9hZEhvb2sodXBsb2FkR3JhcGhpY3MpO1xuICB9XG59XG5QcmVwYXJlLmV4dGVuc2lvbiA9IHtcbiAgbmFtZTogXCJwcmVwYXJlXCIsXG4gIHR5cGU6IGNvcmUuRXh0ZW5zaW9uVHlwZS5SZW5kZXJlclN5c3RlbVxufTtcbmNvcmUuZXh0ZW5zaW9ucy5hZGQoUHJlcGFyZSk7XG5cbmV4cG9ydHMuUHJlcGFyZSA9IFByZXBhcmU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1QcmVwYXJlLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG5jbGFzcyBUaW1lTGltaXRlciB7XG4gIGNvbnN0cnVjdG9yKG1heE1pbGxpc2Vjb25kcykge1xuICAgIHRoaXMubWF4TWlsbGlzZWNvbmRzID0gbWF4TWlsbGlzZWNvbmRzO1xuICAgIHRoaXMuZnJhbWVTdGFydCA9IDA7XG4gIH1cbiAgYmVnaW5GcmFtZSgpIHtcbiAgICB0aGlzLmZyYW1lU3RhcnQgPSBEYXRlLm5vdygpO1xuICB9XG4gIGFsbG93ZWRUb1VwbG9hZCgpIHtcbiAgICByZXR1cm4gRGF0ZS5ub3coKSAtIHRoaXMuZnJhbWVTdGFydCA8IHRoaXMubWF4TWlsbGlzZWNvbmRzO1xuICB9XG59XG5cbmV4cG9ydHMuVGltZUxpbWl0ZXIgPSBUaW1lTGltaXRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbWVMaW1pdGVyLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG5yZXF1aXJlKCcuL3NldHRpbmdzLmpzJyk7XG52YXIgQmFzZVByZXBhcmUgPSByZXF1aXJlKCcuL0Jhc2VQcmVwYXJlLmpzJyk7XG52YXIgQ291bnRMaW1pdGVyID0gcmVxdWlyZSgnLi9Db3VudExpbWl0ZXIuanMnKTtcbnZhciBQcmVwYXJlID0gcmVxdWlyZSgnLi9QcmVwYXJlLmpzJyk7XG52YXIgVGltZUxpbWl0ZXIgPSByZXF1aXJlKCcuL1RpbWVMaW1pdGVyLmpzJyk7XG5cblxuXG5leHBvcnRzLkJhc2VQcmVwYXJlID0gQmFzZVByZXBhcmUuQmFzZVByZXBhcmU7XG5leHBvcnRzLkNvdW50TGltaXRlciA9IENvdW50TGltaXRlci5Db3VudExpbWl0ZXI7XG5leHBvcnRzLlByZXBhcmUgPSBQcmVwYXJlLlByZXBhcmU7XG5leHBvcnRzLlRpbWVMaW1pdGVyID0gVGltZUxpbWl0ZXIuVGltZUxpbWl0ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIGNvcmUgPSByZXF1aXJlKCdAcGl4aS9jb3JlJyk7XG52YXIgQmFzZVByZXBhcmUgPSByZXF1aXJlKCcuL0Jhc2VQcmVwYXJlLmpzJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGNvcmUuc2V0dGluZ3MsIHtcbiAgVVBMT0FEU19QRVJfRlJBTUU6IHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gQmFzZVByZXBhcmUuQmFzZVByZXBhcmUudXBsb2Fkc1BlckZyYW1lO1xuICAgIH0sXG4gICAgc2V0KHZhbHVlKSB7XG4gICAgICBjb3JlLnV0aWxzLmRlcHJlY2F0aW9uKFwiNy4xLjBcIiwgXCJzZXR0aW5ncy5VUExPQURTX1BFUl9GUkFNRSBpcyBkZXByZWNhdGVkLCB1c2UgcHJlcGFyZS5CYXNlUHJlcGFyZS51cGxvYWRzUGVyRnJhbWVcIik7XG4gICAgICBCYXNlUHJlcGFyZS5CYXNlUHJlcGFyZS51cGxvYWRzUGVyRnJhbWUgPSB2YWx1ZTtcbiAgICB9XG4gIH1cbn0pO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ3NldHRpbmdzJywge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb3JlLnNldHRpbmdzOyB9XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldHRpbmdzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG5jbGFzcyBSdW5uZXIge1xuICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2FsaWFzQ291bnQgPSAwO1xuICB9XG4gIGVtaXQoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3KSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiA4KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYXggYXJndW1lbnRzIHJlYWNoZWRcIik7XG4gICAgfVxuICAgIGNvbnN0IHsgbmFtZSwgaXRlbXMgfSA9IHRoaXM7XG4gICAgdGhpcy5fYWxpYXNDb3VudCsrO1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaXRlbXNbaV1bbmFtZV0oYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3KTtcbiAgICB9XG4gICAgaWYgKGl0ZW1zID09PSB0aGlzLml0ZW1zKSB7XG4gICAgICB0aGlzLl9hbGlhc0NvdW50LS07XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGVuc3VyZU5vbkFsaWFzZWRJdGVtcygpIHtcbiAgICBpZiAodGhpcy5fYWxpYXNDb3VudCA+IDAgJiYgdGhpcy5pdGVtcy5sZW5ndGggPiAxKSB7XG4gICAgICB0aGlzLl9hbGlhc0NvdW50ID0gMDtcbiAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zLnNsaWNlKDApO1xuICAgIH1cbiAgfVxuICBhZGQoaXRlbSkge1xuICAgIGlmIChpdGVtW3RoaXMuX25hbWVdKSB7XG4gICAgICB0aGlzLmVuc3VyZU5vbkFsaWFzZWRJdGVtcygpO1xuICAgICAgdGhpcy5yZW1vdmUoaXRlbSk7XG4gICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJlbW92ZShpdGVtKSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmluZGV4T2YoaXRlbSk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgdGhpcy5lbnN1cmVOb25BbGlhc2VkSXRlbXMoKTtcbiAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY29udGFpbnMoaXRlbSkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zLmluY2x1ZGVzKGl0ZW0pO1xuICB9XG4gIHJlbW92ZUFsbCgpIHtcbiAgICB0aGlzLmVuc3VyZU5vbkFsaWFzZWRJdGVtcygpO1xuICAgIHRoaXMuaXRlbXMubGVuZ3RoID0gMDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBkZXN0cm95KCkge1xuICAgIHRoaXMucmVtb3ZlQWxsKCk7XG4gICAgdGhpcy5pdGVtcyA9IG51bGw7XG4gICAgdGhpcy5fbmFtZSA9IG51bGw7XG4gIH1cbiAgZ2V0IGVtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aCA9PT0gMDtcbiAgfVxuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgfVxufVxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUnVubmVyLnByb3RvdHlwZSwge1xuICBkaXNwYXRjaDogeyB2YWx1ZTogUnVubmVyLnByb3RvdHlwZS5lbWl0IH0sXG4gIHJ1bjogeyB2YWx1ZTogUnVubmVyLnByb3RvdHlwZS5lbWl0IH1cbn0pO1xuXG5leHBvcnRzLlJ1bm5lciA9IFJ1bm5lcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJ1bm5lci5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIFJ1bm5lciA9IHJlcXVpcmUoJy4vUnVubmVyLmpzJyk7XG5cblxuXG5leHBvcnRzLlJ1bm5lciA9IFJ1bm5lci5SdW5uZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==