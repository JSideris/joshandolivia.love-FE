"use strict";
(self["webpackChunkwedding_website"] = self["webpackChunkwedding_website"] || []).push([["vendors-node_modules_dothtml_lib_observable-array_js"],{

/***/ "./node_modules/dothtml/lib/observable-array.js":
/*!******************************************************!*\
  !*** ./node_modules/dothtml/lib/observable-array.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
function ObservableArray(items /*, ...target: Array<any>*/) {
    var _self = this, _array = [], _handlers = {
        itemadded: [],
        itemremoved: [],
        itemset: [],
        read: []
    };
    function defineIndexProperty(index) {
        if (!(index in _self)) {
            Object.defineProperty(_self, index, {
                configurable: true,
                enumerable: true,
                get: function () {
                    raiseEvent({
                        type: "read",
                        index: index,
                        item: _array[index]
                    });
                    return _array[index];
                },
                set: function (v) {
                    if (_array[index] != v) {
                        _array[index] = v;
                        raiseEvent({
                            type: "itemset",
                            index: index,
                            item: v
                        });
                    }
                }
            });
        }
    }
    function raiseEvent(event) {
        _handlers[event.type].forEach(function (h) {
            h.call(_self, event);
        });
    }
    Object.defineProperty(_self, "addEventListener", {
        configurable: false,
        enumerable: false,
        writable: false,
        value: function (eventName, handler) {
            eventName = ("" + eventName).toLowerCase();
            if (!(eventName in _handlers))
                throw new Error("Invalid event name.");
            if (typeof handler !== "function")
                throw new Error("Invalid handler.");
            _handlers[eventName].push(handler);
        }
    });
    Object.defineProperty(_self, "removeEventListener", {
        configurable: false,
        enumerable: false,
        writable: false,
        value: function (eventName, handler) {
            eventName = ("" + eventName).toLowerCase();
            if (!(eventName in _handlers))
                throw new Error("Invalid event name.");
            if (typeof handler !== "function")
                throw new Error("Invalid handler.");
            var h = _handlers[eventName];
            var ln = h.length;
            while (--ln >= 0) {
                if (h[ln] === handler) {
                    h.splice(ln, 1);
                }
            }
        }
    });
    Object.defineProperty(_self, "push", {
        configurable: false,
        enumerable: false,
        writable: false,
        value: function () {
            var index;
            for (var i = 0, ln = arguments.length; i < ln; i++) {
                index = _array.length;
                _array.push(arguments[i]);
                defineIndexProperty(index);
                raiseEvent({
                    type: "itemadded",
                    index: index,
                    item: arguments[i]
                });
            }
            return _array.length;
        }
    });
    Object.defineProperty(_self, "pop", {
        configurable: false,
        enumerable: false,
        writable: false,
        value: function () {
            if (_array.length > -1) {
                var index = _array.length - 1, item = _array.pop();
                delete _self[index];
                raiseEvent({
                    type: "itemremoved",
                    index: index,
                    item: item
                });
                return item;
            }
        }
    });
    Object.defineProperty(_self, "unshift", {
        configurable: false,
        enumerable: false,
        writable: false,
        value: function () {
            for (var i = 0, ln = arguments.length; i < ln; i++) {
                _array.splice(i, 0, arguments[i]);
                defineIndexProperty(_array.length - 1);
                raiseEvent({
                    type: "itemadded",
                    index: i,
                    item: arguments[i]
                });
            }
            // Not sure why this was here. Nothing should be getting set.
            // for (; i < _array.length; i++) {
            //     raiseEvent({
            //         type: "itemset",
            //         index: i,
            //         item: _array[i]
            //     });
            // }
            return _array.length;
        }
    });
    Object.defineProperty(_self, "shift", {
        configurable: false,
        enumerable: false,
        writable: false,
        value: function () {
            if (_array.length > -1) {
                var item = _array.shift();
                delete _self[_array.length];
                raiseEvent({
                    type: "itemremoved",
                    index: 0,
                    item: item
                });
                return item;
            }
        }
    });
    Object.defineProperty(_self, "splice", {
        configurable: false,
        enumerable: false,
        writable: false,
        value: function (index, howMany /*, element1, element2, ... */) {
            var removed = [], item, pos;
            index = index == null ? 0 : index < 0 ? _array.length + index : index;
            howMany = howMany == null ? _array.length - index : howMany > 0 ? howMany : 0;
            var removeEvents = [];
            while (howMany--) {
                item = _array.splice(index, 1)[0];
                removed.push(item);
                delete _self[_array.length];
                removeEvents.push({
                    type: "itemremoved",
                    index: index + removed.length - 1,
                    item: item
                });
            }
            for (var i = removeEvents.length - 1; i >= 0; i--) {
                raiseEvent(removeEvents[i]);
            }
            for (var i = 2, ln = arguments.length; i < ln; i++) {
                _array.splice(index, 0, arguments[i]);
                defineIndexProperty(_array.length - 1);
                raiseEvent({
                    type: "itemadded",
                    index: index,
                    item: arguments[i]
                });
                index++;
            }
            return removed;
        }
    });
    Object.defineProperty(_self, "length", {
        configurable: false,
        enumerable: false,
        get: function () {
            return _array.length;
        },
        set: function (value) {
            var n = Number(value);
            var length = _array.length;
            if (n % 1 === 0 && n >= 0) {
                if (n < length) {
                    _self.splice(n);
                }
                else if (n > length) {
                    _self.push.apply(_self, new Array(n - length));
                }
            }
            else {
                throw new RangeError("Invalid array length");
            }
            _array.length = n;
            return value;
        }
    });
    Object.getOwnPropertyNames(Array.prototype).forEach(function (name) {
        if (!(name in _self)) {
            Object.defineProperty(_self, name, {
                configurable: false,
                enumerable: false,
                writable: false,
                value: Array.prototype[name]
            });
        }
    });
    if (items instanceof Array) {
        _self.push.apply(_self, items);
    }
}
exports["default"] = ObservableArray;
ObservableArray.prototype.length = 0;
/**

(function testing() {

  var x = new ObservableArray(["a", "b", "c", "d"]);

  console.log("original array: %o", x.slice());

  x.addEventListener("itemadded", function(e) {
    console.log("Added %o at index %d.", e.item, e.index);
  });

  x.addEventListener("itemset", function(e) {
    console.log("Set index %d to %o.", e.index, e.item);
  });

  x.addEventListener("itemremoved", function(e) {
    console.log("Removed %o at index %d.", e.item, e.index);
  });
 
  console.log("popping and unshifting...");
  x.unshift(x.pop());

  console.log("updated array: %o", x.slice());

  console.log("reversing array...");
  console.log("updated array: %o", x.reverse().slice());

  console.log("splicing...");
  x.splice(1, 2, "x");
  console.log("setting index 2...");
  x[2] = "foo";

  console.log("setting length to 10...");
  x.length = 10;
  console.log("updated array: %o", x.slice());

  console.log("setting length to 2...");
  x.length = 2;

  console.log("extracting first element via shift()");
  x.shift();

  console.log("updated array: %o", x.slice());

})();

 */ 
//# sourceMappingURL=observable-array.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZG90aHRtbF9saWJfb2JzZXJ2YWJsZS1hcnJheV9qcy5jNDYwMjY4YTdlNWM0NzFjMGNlMi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELFFBQVE7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxRQUFRO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esc0JBQXNCLG1CQUFtQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0Esa0RBQWtELFFBQVE7QUFDMUQ7QUFDQTtBQUNBLG1EQUFtRCxRQUFRO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlZGRpbmctd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9kb3RodG1sL2xpYi9vYnNlcnZhYmxlLWFycmF5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmZ1bmN0aW9uIE9ic2VydmFibGVBcnJheShpdGVtcyAvKiwgLi4udGFyZ2V0OiBBcnJheTxhbnk+Ki8pIHtcclxuICAgIHZhciBfc2VsZiA9IHRoaXMsIF9hcnJheSA9IFtdLCBfaGFuZGxlcnMgPSB7XHJcbiAgICAgICAgaXRlbWFkZGVkOiBbXSxcclxuICAgICAgICBpdGVtcmVtb3ZlZDogW10sXHJcbiAgICAgICAgaXRlbXNldDogW10sXHJcbiAgICAgICAgcmVhZDogW11cclxuICAgIH07XHJcbiAgICBmdW5jdGlvbiBkZWZpbmVJbmRleFByb3BlcnR5KGluZGV4KSB7XHJcbiAgICAgICAgaWYgKCEoaW5kZXggaW4gX3NlbGYpKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfc2VsZiwgaW5kZXgsIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByYWlzZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTogX2FycmF5W2luZGV4XVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfYXJyYXlbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FycmF5W2luZGV4XSAhPSB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hcnJheVtpbmRleF0gPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaXRlbXNldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTogdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJhaXNlRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBfaGFuZGxlcnNbZXZlbnQudHlwZV0uZm9yRWFjaChmdW5jdGlvbiAoaCkge1xyXG4gICAgICAgICAgICBoLmNhbGwoX3NlbGYsIGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfc2VsZiwgXCJhZGRFdmVudExpc3RlbmVyXCIsIHtcclxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGV2ZW50TmFtZSwgaGFuZGxlcikge1xyXG4gICAgICAgICAgICBldmVudE5hbWUgPSAoXCJcIiArIGV2ZW50TmFtZSkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgaWYgKCEoZXZlbnROYW1lIGluIF9oYW5kbGVycykpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IG5hbWUuXCIpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaGFuZGxlci5cIik7XHJcbiAgICAgICAgICAgIF9oYW5kbGVyc1tldmVudE5hbWVdLnB1c2goaGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3NlbGYsIFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiLCB7XHJcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChldmVudE5hbWUsIGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgZXZlbnROYW1lID0gKFwiXCIgKyBldmVudE5hbWUpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGlmICghKGV2ZW50TmFtZSBpbiBfaGFuZGxlcnMpKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBldmVudCBuYW1lLlwiKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhhbmRsZXIuXCIpO1xyXG4gICAgICAgICAgICB2YXIgaCA9IF9oYW5kbGVyc1tldmVudE5hbWVdO1xyXG4gICAgICAgICAgICB2YXIgbG4gPSBoLmxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKC0tbG4gPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhbbG5dID09PSBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaC5zcGxpY2UobG4sIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3NlbGYsIFwicHVzaFwiLCB7XHJcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4O1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBfYXJyYXkubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgX2FycmF5LnB1c2goYXJndW1lbnRzW2ldKTtcclxuICAgICAgICAgICAgICAgIGRlZmluZUluZGV4UHJvcGVydHkoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgcmFpc2VFdmVudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpdGVtYWRkZWRcIixcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogYXJndW1lbnRzW2ldXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX2FycmF5Lmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfc2VsZiwgXCJwb3BcIiwge1xyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfYXJyYXkubGVuZ3RoID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IF9hcnJheS5sZW5ndGggLSAxLCBpdGVtID0gX2FycmF5LnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIF9zZWxmW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIHJhaXNlRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaXRlbXJlbW92ZWRcIixcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9zZWxmLCBcInVuc2hpZnRcIiwge1xyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBfYXJyYXkuc3BsaWNlKGksIDAsIGFyZ3VtZW50c1tpXSk7XHJcbiAgICAgICAgICAgICAgICBkZWZpbmVJbmRleFByb3BlcnR5KF9hcnJheS5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIHJhaXNlRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaXRlbWFkZGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGksXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogYXJndW1lbnRzW2ldXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBOb3Qgc3VyZSB3aHkgdGhpcyB3YXMgaGVyZS4gTm90aGluZyBzaG91bGQgYmUgZ2V0dGluZyBzZXQuXHJcbiAgICAgICAgICAgIC8vIGZvciAoOyBpIDwgX2FycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vICAgICByYWlzZUV2ZW50KHtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0eXBlOiBcIml0ZW1zZXRcIixcclxuICAgICAgICAgICAgLy8gICAgICAgICBpbmRleDogaSxcclxuICAgICAgICAgICAgLy8gICAgICAgICBpdGVtOiBfYXJyYXlbaV1cclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIHJldHVybiBfYXJyYXkubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9zZWxmLCBcInNoaWZ0XCIsIHtcclxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX2FycmF5Lmxlbmd0aCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9hcnJheS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIF9zZWxmW19hcnJheS5sZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgcmFpc2VFdmVudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpdGVtcmVtb3ZlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfc2VsZiwgXCJzcGxpY2VcIiwge1xyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoaW5kZXgsIGhvd01hbnkgLyosIGVsZW1lbnQxLCBlbGVtZW50MiwgLi4uICovKSB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmVkID0gW10sIGl0ZW0sIHBvcztcclxuICAgICAgICAgICAgaW5kZXggPSBpbmRleCA9PSBudWxsID8gMCA6IGluZGV4IDwgMCA/IF9hcnJheS5sZW5ndGggKyBpbmRleCA6IGluZGV4O1xyXG4gICAgICAgICAgICBob3dNYW55ID0gaG93TWFueSA9PSBudWxsID8gX2FycmF5Lmxlbmd0aCAtIGluZGV4IDogaG93TWFueSA+IDAgPyBob3dNYW55IDogMDtcclxuICAgICAgICAgICAgdmFyIHJlbW92ZUV2ZW50cyA9IFtdO1xyXG4gICAgICAgICAgICB3aGlsZSAoaG93TWFueS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtID0gX2FycmF5LnNwbGljZShpbmRleCwgMSlbMF07XHJcbiAgICAgICAgICAgICAgICByZW1vdmVkLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgX3NlbGZbX2FycmF5Lmxlbmd0aF07XHJcbiAgICAgICAgICAgICAgICByZW1vdmVFdmVudHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpdGVtcmVtb3ZlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCArIHJlbW92ZWQubGVuZ3RoIC0gMSxcclxuICAgICAgICAgICAgICAgICAgICBpdGVtOiBpdGVtXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gcmVtb3ZlRXZlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICByYWlzZUV2ZW50KHJlbW92ZUV2ZW50c1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDIsIGxuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIF9hcnJheS5zcGxpY2UoaW5kZXgsIDAsIGFyZ3VtZW50c1tpXSk7XHJcbiAgICAgICAgICAgICAgICBkZWZpbmVJbmRleFByb3BlcnR5KF9hcnJheS5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIHJhaXNlRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaXRlbWFkZGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW06IGFyZ3VtZW50c1tpXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZW1vdmVkO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9zZWxmLCBcImxlbmd0aFwiLCB7XHJcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9hcnJheS5sZW5ndGg7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgbiA9IE51bWJlcih2YWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBfYXJyYXkubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAobiAlIDEgPT09IDAgJiYgbiA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9zZWxmLnNwbGljZShuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG4gPiBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfc2VsZi5wdXNoLmFwcGx5KF9zZWxmLCBuZXcgQXJyYXkobiAtIGxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGFycmF5IGxlbmd0aFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfYXJyYXkubGVuZ3RoID0gbjtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoQXJyYXkucHJvdG90eXBlKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgaWYgKCEobmFtZSBpbiBfc2VsZikpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9zZWxmLCBuYW1lLCB7XHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkucHJvdG90eXBlW25hbWVdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKGl0ZW1zIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICBfc2VsZi5wdXNoLmFwcGx5KF9zZWxmLCBpdGVtcyk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gT2JzZXJ2YWJsZUFycmF5O1xyXG5PYnNlcnZhYmxlQXJyYXkucHJvdG90eXBlLmxlbmd0aCA9IDA7XHJcbi8qKlxyXG5cclxuKGZ1bmN0aW9uIHRlc3RpbmcoKSB7XHJcblxyXG4gIHZhciB4ID0gbmV3IE9ic2VydmFibGVBcnJheShbXCJhXCIsIFwiYlwiLCBcImNcIiwgXCJkXCJdKTtcclxuXHJcbiAgY29uc29sZS5sb2coXCJvcmlnaW5hbCBhcnJheTogJW9cIiwgeC5zbGljZSgpKTtcclxuXHJcbiAgeC5hZGRFdmVudExpc3RlbmVyKFwiaXRlbWFkZGVkXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiQWRkZWQgJW8gYXQgaW5kZXggJWQuXCIsIGUuaXRlbSwgZS5pbmRleCk7XHJcbiAgfSk7XHJcblxyXG4gIHguYWRkRXZlbnRMaXN0ZW5lcihcIml0ZW1zZXRcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgY29uc29sZS5sb2coXCJTZXQgaW5kZXggJWQgdG8gJW8uXCIsIGUuaW5kZXgsIGUuaXRlbSk7XHJcbiAgfSk7XHJcblxyXG4gIHguYWRkRXZlbnRMaXN0ZW5lcihcIml0ZW1yZW1vdmVkXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiUmVtb3ZlZCAlbyBhdCBpbmRleCAlZC5cIiwgZS5pdGVtLCBlLmluZGV4KTtcclxuICB9KTtcclxuIFxyXG4gIGNvbnNvbGUubG9nKFwicG9wcGluZyBhbmQgdW5zaGlmdGluZy4uLlwiKTtcclxuICB4LnVuc2hpZnQoeC5wb3AoKSk7XHJcblxyXG4gIGNvbnNvbGUubG9nKFwidXBkYXRlZCBhcnJheTogJW9cIiwgeC5zbGljZSgpKTtcclxuXHJcbiAgY29uc29sZS5sb2coXCJyZXZlcnNpbmcgYXJyYXkuLi5cIik7XHJcbiAgY29uc29sZS5sb2coXCJ1cGRhdGVkIGFycmF5OiAlb1wiLCB4LnJldmVyc2UoKS5zbGljZSgpKTtcclxuXHJcbiAgY29uc29sZS5sb2coXCJzcGxpY2luZy4uLlwiKTtcclxuICB4LnNwbGljZSgxLCAyLCBcInhcIik7XHJcbiAgY29uc29sZS5sb2coXCJzZXR0aW5nIGluZGV4IDIuLi5cIik7XHJcbiAgeFsyXSA9IFwiZm9vXCI7XHJcblxyXG4gIGNvbnNvbGUubG9nKFwic2V0dGluZyBsZW5ndGggdG8gMTAuLi5cIik7XHJcbiAgeC5sZW5ndGggPSAxMDtcclxuICBjb25zb2xlLmxvZyhcInVwZGF0ZWQgYXJyYXk6ICVvXCIsIHguc2xpY2UoKSk7XHJcblxyXG4gIGNvbnNvbGUubG9nKFwic2V0dGluZyBsZW5ndGggdG8gMi4uLlwiKTtcclxuICB4Lmxlbmd0aCA9IDI7XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiZXh0cmFjdGluZyBmaXJzdCBlbGVtZW50IHZpYSBzaGlmdCgpXCIpO1xyXG4gIHguc2hpZnQoKTtcclxuXHJcbiAgY29uc29sZS5sb2coXCJ1cGRhdGVkIGFycmF5OiAlb1wiLCB4LnNsaWNlKCkpO1xyXG5cclxufSkoKTtcclxuXHJcbiAqLyBcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS1hcnJheS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=